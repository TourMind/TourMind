<%= render 'shared/navbar' %>
  <%= render 'shared/items' %>

    <div class="mr-4">
      <div class='flex items-center justify-between'>
        <h1 class='text-4xl font-bold'>景點</h1>
        <%= link_to '新增景點' , new_site_path(@site), class:'mt-2 rounded-lg py-3 px-5 bg-gray-200 inline-block
          font-medium'%>
      </div>
      <div class="flex justify-between items-center">
        <div class="py-2">
          <% if @sites.present? %>
            <%= @sites.count %> 個景點
              <% end %>
        </div>
        <form class="flex justify-center py-1">
          <div class="border-2 rounded-full flex items-center  border-gray-700 bg-gray-100">
            <input type="text" name="keyword" value="<%= params[:keyword]%>" placeholder="請輸入關鍵字...."
              class="mx-1 border-0 bg-transparent focus:ring-transparent h-1">
            <button type="submit" class="btn-add"><i class="fas fa-search w-3 mr-2"></i></button>
          </div>
        </form>
      </div>
      <h2>
        <%= flash[:notice]%>
      </h2>

      <!--景點清單區-->
      <section class="flex flex-wrap">
        <% @sites.each_with_index do |site, index| %>
          <div class="relative w-1/2 md:w-1/4 grid grid-cols-1 md:grid-col-4 bg-white rounded-md overflow-hidden shadow-lg mb-3">
            <div class="w-full h-full items-center">
              <img class="w-full object-contain z-0" src="https://fakeimg.pl/350x200/?text=Hello">
              <div class="absolute top-0 right-0 m-3">
                <span class="text-red-500 text-3xl">&#x2665;</span>
              </div>
            </div>
            <div class="flex-grow px-2 py-2">
              <h2 class="text-xl font-medium p-4">
                <%= link_to site.name , site_path(site.id) %>
              </h2>
              <div class="flex flex-wrap md:flex-nowrap">
                <ul class="flex flex-col md:w-1/2 justify-evenly border-r px-4">
                  <li>景點網站:<%= link_to site.name , site.website,target: "_blank" %>
                  <li>地址:<%= site.address %>
                  </li>
                  <li>電話:<%= site.tel %>
                  </li>
                  <li>簡介:<%= site.intro&.truncate(10)%>
                  </li>
                  <li>Google地圖<i class="fa-solid fa-globe"></i>
                  </li>
                </ul>
                <div class="md:w-1/2 px-4">
                  <h2 class="font-medium">景點類型</h2>
                  <% if @site_type[index].present? %>
                    <ul class="flex flex-wrap mt-2">
                      <% @site_type[index].each do |site_type| %>
                        <li
                          class='inline-block px-3 py-1 mb-2 mr-1 text-sm font-semibold text-gray-700 bg-gray-200 rounded-full'>
                          <%= site_type %>
                        </li>
                        <% end %>
                    </ul>
                    <% else %>
                      <p>沒有類型資料</p>
                      <% end %>
                </div>
              </div>
            </div>
          </div>
          <% end %>
      </section>
      <!--景點清單區-->
    </div>
    <div>
      <%= paginate @sites%>
    </div>

   